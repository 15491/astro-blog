---
import { getAllPosts, getUniqueTagsWithCount } from "@/data/post";
import PageLayout from "@/layouts/Base.astro";

const allPosts = await getAllPosts();
const allTags = getUniqueTagsWithCount(allPosts);

const meta = {
  description: "我在文章中写到的所有主题列表",
  title: "所有标签",
};
---

<PageLayout meta={meta}>
  <h1 class="title mb-6">标签</h1>
  <ul class="space-y-4">
    {
      allTags.map(([tag, val]) => (
        <li class="flex items-center gap-x-2">
          <a
            class="cactus-link inline-block"
            href={`/tags/${tag}/`}
            title={`查看带有标签的文章: ${tag}`}
          >
            &#35;{tag}
          </a>
          <span class="inline-block">- {val} 篇文章</span>
        </li>
      ))
    }
  </ul>
  <button
    id="back-btn"
    class="fixed end-4 top-8 z-90 flex h-10 w-10 cursor-pointer items-center justify-center rounded-full border-2 border-red-200 bg-red-100 text-red-700 transition-all duration-300 hover:border-red-300 hover:bg-red-200 hover:text-red-800 hover:shadow-md sm:end-8 sm:h-12 sm:w-12 dark:border-red-800/30 dark:bg-red-900/20 dark:text-red-400 dark:hover:border-red-700/50 dark:hover:bg-red-800/30 dark:hover:text-red-300"
    title="返回上一页"
  >
    <span class="sr-only">返回上一页</span>
    <svg
      aria-hidden="true"
      class="h-6 w-6"
      fill="none"
      focusable="false"
      stroke="currentColor"
      stroke-width="2"
      viewBox="0 0 24 24"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path d="M15 18l-6-6 6-6" stroke-linecap="round" stroke-linejoin="round"></path>
    </svg>
  </button>
  <script>
    const backBtn = document.getElementById("back-btn") as HTMLButtonElement;
    backBtn.addEventListener("click", () => {
      history.back();
    });
  </script>
</PageLayout>
